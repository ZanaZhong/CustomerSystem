{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      customers: [],\n      newCustomer: {\n        name: \"\",\n        email: \"\"\n      },\n      editingCustomer: null,\n      editingIndex: null,\n      isUpdating: false\n    };\n  },\n  mounted() {\n    this.fetchCustomers();\n  },\n  methods: {\n    async fetchCustomers() {\n      try {\n        const response = await axios.get(\"http://localhost:8888/customers\");\n        this.customers = response.data;\n      } catch (error) {\n        console.error(\"無法取得客戶資料\", error);\n      }\n    },\n    async submitNewCustomer() {\n      try {\n        await axios.post(\"http://localhost:8888/customers\", this.newCustomer);\n        alert(\"新增成功！\");\n        this.fetchCustomers();\n        this.newCustomer = {\n          name: \"\",\n          email: \"\"\n        };\n      } catch (error) {\n        console.error(\"新增失敗\", error);\n      }\n    },\n    editCustomer(index, customer) {\n      this.editingIndex = index;\n      this.editingCustomer = {\n        ...customer\n      };\n    },\n    async submitUpdate(index) {\n      this.isUpdating = true;\n      try {\n        await axios.put(`http://localhost:8888/customers/${this.editingCustomer.id}`, this.editingCustomer);\n\n        // 更新成功後，將本地資料更新\n        // this.$set(this.customers, index, { ...this.editingCustomer });\n\n        await this.fetchCustomers();\n        alert(\"更新成功！\");\n        this.editingCustomer = null;\n        this.editingIndex = null;\n      } catch (error) {\n        console.error(\"更新失敗\", error);\n      } finally {\n        this.isUpdating = false;\n      }\n    },\n    // 取消編輯\n    cancelEdit() {\n      this.editingIndex = null;\n      this.editingCustomer = null;\n    }\n  }\n};","map":{"version":3,"names":["axios","data","customers","newCustomer","name","email","editingCustomer","editingIndex","isUpdating","mounted","fetchCustomers","methods","response","get","error","console","submitNewCustomer","post","alert","editCustomer","index","customer","submitUpdate","put","id","cancelEdit"],"sources":["/app/src/components/CustomerPage.vue"],"sourcesContent":["<template>\n  <div class=\"customer-page\">\n    <!-- 標題 -->\n    <h1>客戶資料</h1>\n\n    <!-- 新增客戶表單 -->\n    <div class=\"form-section\">\n      <h2>新增客戶</h2>\n      <form @submit.prevent=\"submitNewCustomer\" class=\"form\">\n        <div class=\"form-group\">\n          <label for=\"name\">名稱</label>\n          <input type=\"text\" id=\"name\" v-model=\"newCustomer.name\" required />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"email\">電子郵件</label>\n          <input type=\"email\" id=\"email\" v-model=\"newCustomer.email\" required />\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\">新增客戶</button>\n      </form>\n    </div>\n\n    <!-- 客戶表格 -->\n    <div class=\"table-section\">\n      <table class=\"customer-table\">\n        <thead>\n          <tr>\n            <th>客戶名稱</th>\n            <th>電子郵件</th>\n            <th>去年總交易金額</th>\n            <th>/</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(customer, index) in customers\" :key=\"customer.id\">\n            \n\n\n\n\n            <!-- 編輯模式：只允許更動 \"名稱\" 和 \"電子郵件\" -->\n            <template v-if=\"editingIndex === index\">\n              <td>\n                <input\n                  type=\"text\"\n                  v-model=\"editingCustomer.name\"\n                  class=\"form-control\"\n                  placeholder=\"名稱\"\n                />\n              </td>\n              <td>\n                <input\n                  type=\"email\"\n                  v-model=\"editingCustomer.email\"\n                  class=\"form-control\"\n                  placeholder=\"電子郵件\"\n                />\n              </td>\n              <!-- 唯讀欄位 -->\n              <td>\n                <span>{{ customer.total_amount_last_year }}</span>\n              </td>\n              <td>\n                <button\n                  @click=\"submitUpdate(index)\"\n                  :disabled=\"isUpdating\"\n                  class=\"btn btn-success btn-sm\"\n                >\n                  {{ isUpdating ? \"更新中...\" : \"儲存\" }}\n                </button>\n                <button\n                  @click=\"cancelEdit\"\n                  :disabled=\"isUpdating\"\n                  class=\"btn btn-secondary btn-sm\"\n                >\n                  取消\n                </button>\n              </td>\n            </template>\n\n            <!-- 預設顯示模式 -->\n            <template v-else>\n              <td>{{ customer.name }}</td>\n              <td>{{ customer.email }}</td>\n              <td>{{ customer.total_amount_last_year }}</td>\n              <td>\n                <button\n                  @click=\"editCustomer(index, customer)\"\n                  class=\"btn btn-warning btn-sm\"\n                >\n                  編輯\n                </button>\n              </td>\n            </template>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- 編輯客戶表單 -->\n    <div v-if=\"editingCustomer\" class=\"form-section\">\n      <h3>編輯客戶</h3>\n      <form @submit.prevent=\"submitUpdate\" class=\"form\">\n        <div class=\"form-group\">\n          <label for=\"editName\">名稱</label>\n          <input\n            type=\"text\"\n            id=\"editName\"\n            v-model=\"editingCustomer.name\"\n            required\n          />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"editEmail\">電子郵件</label>\n          <input\n            type=\"email\"\n            id=\"editEmail\"\n            v-model=\"editingCustomer.email\"\n            required\n          />\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\">更新資料</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      customers: [],\n      newCustomer: {\n        name: \"\",\n        email: \"\",\n      },\n      editingCustomer: null,\n      editingIndex: null,\n      isUpdating: false,\n    };\n  },\n  mounted() {\n    this.fetchCustomers();\n  },\n  methods: {\n    async fetchCustomers() {\n      try {\n        const response = await axios.get(\"http://localhost:8888/customers\");\n        this.customers = response.data;\n      } catch (error) {\n        console.error(\"無法取得客戶資料\", error);\n      }\n    },\n\n    async submitNewCustomer() {\n      try {\n        await axios.post(\"http://localhost:8888/customers\", this.newCustomer);\n        alert(\"新增成功！\");\n        this.fetchCustomers();\n        this.newCustomer = { name: \"\", email: \"\" };\n      } catch (error) {\n        console.error(\"新增失敗\", error);\n      }\n    },\n\n    editCustomer(index, customer) {\n      this.editingIndex = index;\n      this.editingCustomer = { ...customer };\n    },\n\n    async submitUpdate(index) {\n      this.isUpdating = true;\n      try {\n        await axios.put(\n          `http://localhost:8888/customers/${this.editingCustomer.id}`,\n          this.editingCustomer\n        );\n\n        // 更新成功後，將本地資料更新\n        // this.$set(this.customers, index, { ...this.editingCustomer });\n\n        await this.fetchCustomers();\n        alert(\"更新成功！\");\n        this.editingCustomer = null;\n        this.editingIndex = null;\n      } catch (error) {\n        console.error(\"更新失敗\", error);\n      } finally {\n        this.isUpdating = false;\n      }\n    },\n\n    // 取消編輯\n    cancelEdit() {\n      this.editingIndex = null;\n      this.editingCustomer = null;\n    },\n\n  },\n};\n</script>\n\n<style>\n/* 基本重置 */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family: \"Arial\", sans-serif;\n}\n\n/* 整體頁面設計 */\n.customer-page {\n  background-color: #f4f6f8;\n  padding: 20px;\n}\n\n/* 標題樣式 */\nh1,\nh2,\nh3 {\n  text-align: center;\n  color: #2c3e50;\n  margin-bottom: 10px;\n}\n\n/* 表單區塊 */\n.form-section {\n  background-color: #ffffff;\n  padding: 20px;\n  margin: 20px auto;\n  border-radius: 8px;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n  max-width: 500px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #34495e;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  transition: border-color 0.3s;\n}\n\n.form-group input:focus {\n  border-color: #3498db;\n  outline: none;\n}\n\n/* 按鈕樣式 */\n.btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.3s, color 0.3s;\n}\n\n.btn-success {\n  background-color: #2ecc71;\n  color: #fff;\n}\n\n.btn-success:hover {\n  background-color: #27ae60;\n}\n\n.btn-primary {\n  background-color: #3498db;\n  color: #fff;\n}\n\n.btn-primary:hover {\n  background-color: #2980b9;\n}\n\n.btn-secondary {\n  background-color: #f39c12;\n  color: #fff;\n}\n\n.btn-secondary:hover {\n  background-color: #e67e22;\n}\n\n.btn-warning {\n  background-color: #e74c3c; /* 警告紅色 */\n  color: #fff;\n}\n\n.btn-warning:hover {\n  background-color: #c0392b;\n}\n\n/* 禁用按鈕樣式 */\n.btn:disabled {\n  background-color: #d3d3d3;\n  cursor: not-allowed;\n  color: #fff;\n}\n\n/* 表格區塊 */\n.table-section {\n  margin: 20px auto;\n  max-width: 1000px;\n}\n\n.customer-table {\n  width: 100%;\n  border-collapse: collapse;\n  background-color: #ffffff;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.customer-table th,\n.customer-table td {\n  padding: 10px 15px;\n  border: 1px solid #ddd;\n  text-align: center;\n}\n\n.customer-table th {\n  background-color: #2c3e50;\n  color: #ffffff;\n}\n\n.customer-table tr:nth-child(even) {\n  background-color: #f9f9f9;\n}\n\n.customer-table tr:hover {\n  background-color: #f1f1f1;\n}\n</style>\n"],"mappings":"AA+HA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,WAAW,EAAE;QACXC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE;MACT,CAAC;MACDC,eAAe,EAAE,IAAI;MACrBC,YAAY,EAAE,IAAI;MAClBC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,cAAc,CAAC,CAAC;EACvB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,cAAcA,CAAA,EAAG;MACrB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMZ,KAAK,CAACa,GAAG,CAAC,iCAAiC,CAAC;QACnE,IAAI,CAACX,SAAQ,GAAIU,QAAQ,CAACX,IAAI;MAChC,EAAE,OAAOa,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;MAClC;IACF,CAAC;IAED,MAAME,iBAAiBA,CAAA,EAAG;MACxB,IAAI;QACF,MAAMhB,KAAK,CAACiB,IAAI,CAAC,iCAAiC,EAAE,IAAI,CAACd,WAAW,CAAC;QACrEe,KAAK,CAAC,OAAO,CAAC;QACd,IAAI,CAACR,cAAc,CAAC,CAAC;QACrB,IAAI,CAACP,WAAU,GAAI;UAAEC,IAAI,EAAE,EAAE;UAAEC,KAAK,EAAE;QAAG,CAAC;MAC5C,EAAE,OAAOS,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,MAAM,EAAEA,KAAK,CAAC;MAC9B;IACF,CAAC;IAEDK,YAAYA,CAACC,KAAK,EAAEC,QAAQ,EAAE;MAC5B,IAAI,CAACd,YAAW,GAAIa,KAAK;MACzB,IAAI,CAACd,eAAc,GAAI;QAAE,GAAGe;MAAS,CAAC;IACxC,CAAC;IAED,MAAMC,YAAYA,CAACF,KAAK,EAAE;MACxB,IAAI,CAACZ,UAAS,GAAI,IAAI;MACtB,IAAI;QACF,MAAMR,KAAK,CAACuB,GAAG,CACb,mCAAmC,IAAI,CAACjB,eAAe,CAACkB,EAAE,EAAE,EAC5D,IAAI,CAAClB,eACP,CAAC;;QAED;QACA;;QAEA,MAAM,IAAI,CAACI,cAAc,CAAC,CAAC;QAC3BQ,KAAK,CAAC,OAAO,CAAC;QACd,IAAI,CAACZ,eAAc,GAAI,IAAI;QAC3B,IAAI,CAACC,YAAW,GAAI,IAAI;MAC1B,EAAE,OAAOO,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,MAAM,EAAEA,KAAK,CAAC;MAC9B,UAAU;QACR,IAAI,CAACN,UAAS,GAAI,KAAK;MACzB;IACF,CAAC;IAED;IACAiB,UAAUA,CAAA,EAAG;MACX,IAAI,CAAClB,YAAW,GAAI,IAAI;MACxB,IAAI,CAACD,eAAc,GAAI,IAAI;IAC7B;EAEF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}