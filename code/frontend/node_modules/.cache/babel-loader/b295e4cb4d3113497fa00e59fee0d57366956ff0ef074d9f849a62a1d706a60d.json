{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = [\"value\"];\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"h1\", null, \"客戶資料\", -1 /* HOISTED */)), _createCommentVNode(\" 交易紀錄查詢表單 \"), _cache[10] || (_cache[10] = _createElementVNode(\"h2\", null, \"查詢客戶交易紀錄\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.fetchCustomerTransactions && $options.fetchCustomerTransactions(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"customerSelect\"\n  }, \"選擇客戶\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedCustomerId = $event),\n    id: \"customerSelect\",\n    required: \"\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.customers, customer => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: customer.id,\n      value: customer.id\n    }, _toDisplayString(customer.name), 9 /* TEXT, PROPS */, _hoisted_1);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.selectedCustomerId]])]), _createElementVNode(\"div\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"startDate\"\n  }, \"開始日期\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    id: \"startDate\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.startDate = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.startDate]])]), _createElementVNode(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"endDate\"\n  }, \"結束日期\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    id: \"endDate\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.endDate = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.endDate]])]), _cache[7] || (_cache[7] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"查詢交易紀錄\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */), _createCommentVNode(\" 顯示交易紀錄 \"), $data.transactions.length > 0 ? (_openBlock(), _createElementBlock(\"table\", _hoisted_2, [_cache[8] || (_cache[8] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"交易日期\"), _createElementVNode(\"th\", null, \"金額\"), _createElementVNode(\"th\", null, \"描述\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.transactions, transaction => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: transaction.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(transaction.date), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(transaction.amount), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(transaction.description), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_3, \"尚未查詢到交易紀錄\"))]);\n}","map":{"version":3,"names":["key","_createElementBlock","_createElementVNode","_createCommentVNode","onSubmit","_cache","_withModifiers","args","$options","fetchCustomerTransactions","for","$event","$data","selectedCustomerId","id","required","_Fragment","_renderList","customers","customer","value","name","_hoisted_1","type","startDate","endDate","transactions","length","_hoisted_2","transaction","_toDisplayString","date","amount","description","_hoisted_3"],"sources":["/Users/zana/Pretest/code/frontend/src/components/TransactionPage.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>客戶資料</h1>\n\n    <!-- 交易紀錄查詢表單 -->\n    <h2>查詢客戶交易紀錄</h2>\n    <form @submit.prevent=\"fetchCustomerTransactions\">\n      <div>\n        <label for=\"customerSelect\">選擇客戶</label>\n        <select v-model=\"selectedCustomerId\" id=\"customerSelect\" required>\n          <option v-for=\"customer in customers\" :key=\"customer.id\" :value=\"customer.id\">\n            {{ customer.name }}\n          </option>\n        </select>\n      </div>\n      <div>\n        <label for=\"startDate\">開始日期</label>\n        <input type=\"date\" id=\"startDate\" v-model=\"startDate\" required />\n      </div>\n      <div>\n        <label for=\"endDate\">結束日期</label>\n        <input type=\"date\" id=\"endDate\" v-model=\"endDate\" required />\n      </div>\n      <button type=\"submit\">查詢交易紀錄</button>\n    </form>\n\n    <!-- 顯示交易紀錄 -->\n    <table v-if=\"transactions.length > 0\">\n      <thead>\n        <tr>\n          <th>交易日期</th>\n          <th>金額</th>\n          <th>描述</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"transaction in transactions\" :key=\"transaction.id\">\n          <td>{{ transaction.date }}</td>\n          <td>{{ transaction.amount }}</td>\n          <td>{{ transaction.description }}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <p v-else>尚未查詢到交易紀錄</p>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      customers: [],\n      selectedCustomerId: null,\n      startDate: '',\n      endDate: '',\n      transactions: [],\n    };\n  },\n  mounted() {\n    this.fetchCustomers();\n  },\n  methods: {\n    // 獲取所有客戶資料\n    async fetchCustomers() {\n      try {\n        const response = await axios.get('http://localhost:8888/customers');\n        this.customers = response.data;\n      } catch (error) {\n        console.error('無法取得客戶資料', error);\n      }\n    },\n\n    // 查詢指定客戶及時間範圍的交易紀錄\n    async fetchCustomerTransactions() {\n      try {\n        const response = await axios.get(`http://localhost:8888/transactions/${this.selectedCustomerId}`, {\n          params: {\n            startDate: this.startDate,\n            endDate: this.endDate,\n          },\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          alert(`查詢失敗: ${error.error}`); // 顯示錯誤訊息\n        } else {\n          this.transactions = await response.json();\n        }\n      } catch (error) {\n        console.error('查詢交易紀錄失敗', error);\n      }\n    },\n  },\n};\n</script>\n"],"mappings":";mBAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;uBACEC,mBAAA,CA4CM,c,0BA3CJC,mBAAA,CAAa,YAAT,MAAI,sBAERC,mBAAA,cAAiB,E,4BACjBD,mBAAA,CAAiB,YAAb,UAAQ,sBACZA,mBAAA,CAkBO;IAlBAE,QAAM,EAAAC,MAAA,QAAAA,MAAA,MANjBC,cAAA,KAAAC,IAAA,KAM2BC,QAAA,CAAAC,yBAAA,IAAAD,QAAA,CAAAC,yBAAA,IAAAF,IAAA,CAAyB;MAC9CL,mBAAA,CAOM,c,0BANJA,mBAAA,CAAwC;IAAjCQ,GAAG,EAAC;EAAgB,GAAC,MAAI,sB,gBAChCR,mBAAA,CAIS;IAbjB,uBAAAG,MAAA,QAAAA,MAAA,MAAAM,MAAA,IASyBC,KAAA,CAAAC,kBAAkB,GAAAF,MAAA;IAAEG,EAAE,EAAC,gBAAgB;IAACC,QAAQ,EAAR;yBACvDd,mBAAA,CAESe,SAAA,QAZnBC,WAAA,CAUqCL,KAAA,CAAAM,SAAS,EAArBC,QAAQ;yBAAvBlB,mBAAA,CAES;MAF8BD,GAAG,EAAEmB,QAAQ,CAACL,EAAE;MAAGM,KAAK,EAAED,QAAQ,CAACL;wBACrEK,QAAQ,CAACE,IAAI,wBAX5BC,UAAA;2EASyBV,KAAA,CAAAC,kBAAkB,E,KAMrCX,mBAAA,CAGM,c,0BAFJA,mBAAA,CAAmC;IAA5BQ,GAAG,EAAC;EAAW,GAAC,MAAI,sB,gBAC3BR,mBAAA,CAAiE;IAA1DqB,IAAI,EAAC,MAAM;IAACT,EAAE,EAAC,WAAW;IAjBzC,uBAAAT,MAAA,QAAAA,MAAA,MAAAM,MAAA,IAiBmDC,KAAA,CAAAY,SAAS,GAAAb,MAAA;IAAEI,QAAQ,EAAR;iDAAXH,KAAA,CAAAY,SAAS,E,KAEtDtB,mBAAA,CAGM,c,0BAFJA,mBAAA,CAAiC;IAA1BQ,GAAG,EAAC;EAAS,GAAC,MAAI,sB,gBACzBR,mBAAA,CAA6D;IAAtDqB,IAAI,EAAC,MAAM;IAACT,EAAE,EAAC,SAAS;IArBvC,uBAAAT,MAAA,QAAAA,MAAA,MAAAM,MAAA,IAqBiDC,KAAA,CAAAa,OAAO,GAAAd,MAAA;IAAEI,QAAQ,EAAR;iDAATH,KAAA,CAAAa,OAAO,E,+BAElDvB,mBAAA,CAAqC;IAA7BqB,IAAI,EAAC;EAAQ,GAAC,QAAM,qB,4BAG9BpB,mBAAA,YAAe,EACFS,KAAA,CAAAc,YAAY,CAACC,MAAM,Q,cAAhC1B,mBAAA,CAeQ,SA1CZ2B,UAAA,G,0BA4BM1B,mBAAA,CAMQ,gBALNA,mBAAA,CAIK,aAHHA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAW,YAAP,IAAE,GACNA,mBAAA,CAAW,YAAP,IAAE,E,wBAGVA,mBAAA,CAMQ,iB,kBALND,mBAAA,CAIKe,SAAA,QAxCbC,WAAA,CAoCkCL,KAAA,CAAAc,YAAY,EAA3BG,WAAW;yBAAtB5B,mBAAA,CAIK;MAJoCD,GAAG,EAAE6B,WAAW,CAACf;QACxDZ,mBAAA,CAA+B,YAAA4B,gBAAA,CAAxBD,WAAW,CAACE,IAAI,kBACvB7B,mBAAA,CAAiC,YAAA4B,gBAAA,CAA1BD,WAAW,CAACG,MAAM,kBACzB9B,mBAAA,CAAsC,YAAA4B,gBAAA,CAA/BD,WAAW,CAACI,WAAW,iB;uDAKpChC,mBAAA,CAAuB,KA5C3BiC,UAAA,EA4Cc,WAAS,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}